(function(a,b,c,d){a.fn.caret=function(e,f){var g,h,i=this[0],j=a.browser.msie;if(typeof e=="object"&&typeof e.start=="number"&&typeof e.end=="number")g=e.start,h=e.end;else if(typeof e=="number"&&typeof f=="number")g=e,h=f;else if(typeof e=="string")(g=i.value.indexOf(e))>-1?h=g+e[b]:g=null;else if(Object.prototype.toString.call(e)==="[object RegExp]"){var k=e.exec(i.value);k!=null&&(g=k.index,h=g+k[0][b])}if(typeof g!="undefined"){if(j){var l=this[0].createTextRange();l.collapse(!0),l.moveStart("character",g),l.moveEnd("character",h-g),l.select()}else this[0].selectionStart=g,this[0].selectionEnd=h;return this[0].focus(),this}if(j){var m=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){var n=this.val(),o=m[c]()[d]();o.moveEnd("character",n[b]);var p=o.text==""?n[b]:n.lastIndexOf(o.text);o=m[c]()[d](),o.moveStart("character",-n[b]);var q=o.text[b]}else{var o=m[c](),r=o[d]();r.moveToElementText(this[0]),r.setEndPoint("EndToEnd",o);var p=r.text[b]-o.text[b],q=p+o.text[b]}}else var p=i.selectionStart,q=i.selectionEnd;var s=i.value.substring(p,q);return{start:p,end:q,text:s,replace:function(a){return i.value.substring(0,p)+a+i.value.substring(q,i.value[b])}}}})(jQuery,"length","createRange","duplicate")